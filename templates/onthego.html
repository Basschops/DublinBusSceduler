{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="jumbotron text-center">
  <div class="container">

    <div class="row">
      <div class="col-sm-12">
        <p>On The Go</p>
      </div>
    </div>

    <div class="row" style="background-color: white">
      <div class="col-sm-4">
        <p2 for="destination">What is your destination stop? </p2>
      </div>
      <div class="col-sm-4">
        <div class="form-group">
          <div class="ui-widget"> <!-- jQuery autocomplete UI -->
            <input id="destination" class="form-control" type="text" placeholder="Parnell Square" name="busnum_var" required>
          </div>
        </div>
      </div>
      <div class="col-sm-4">
        <button class="btn btn-primary" id="directionsButton">Get Directions</button>
      </div>
    </div>
    <br>

    <div class="row">
      <div class="col-sm-8" style="background-color:white;">
        <div id="map" style="width:100%; height:400px;">
          <!-- google maps go here -->
        </div>
      </div>
      <div class="col-sm-4">
        <br>

        <!--Input box for route number with autocomplete RTPI query-->
        <form action="/onthego/formdata" method="get">
          <div class="form-group">
            <!-- <input id="route_number" onkeyup="pred1()" class="form-control" type="text" placeholder="e.g. 46A" name="busnum_var" required> -->
            <div class="ui-widget"> <!-- jQuery autocomplete UI -->
                
              <input id="bus_number" class="form-control" type="text" placeholder="Bus number" name="busnum_var" required>
            </div>
          </div>
          <br>

          <!-- Input box for "from" with autocomplete RTPI query -->
          <div class="form-group">
            <div class="ui-widget"> <!-- jQuery autocomplete UI -->
                
                
            <input id="location_from" class="form-control" type="text" placeholder="Start stop" name="from_var" required>
        
            </div>
          </div>
          <br>

          <!-- Input box for "to" with autocomplete RTPI query -->
          <div class="form-group">
            <div class="ui-widget"> <!-- jQuery autocomplete UI -->
                
                 <input id="location_to"  class="form-control" type="text" placeholder="End stop" name="to_var" required>

            </div>
          </div>
          <br>
          <button class="btn btn-primary" type="submit">Submit</button>
        </form>
      </div>
    </div>

    <!-- server side rendering of the response to the form submission -->
    <!-- in next iteration of the product, replace with AJAX call for client side rendering -->
    {% if busNum %} <!-- if bus number variable is not null...simple check to see if data is returned, before rendering anything below. -->
    <br/>
    <div class="row">
      <div class="col-sm-6">
        <h2>Your Input</h2>
        <ul class="list-group">
          <li class="list-group-item">Bus number: {{ busNum }}</li>
          <li class="list-group-item">From: {{ from }}</li>
          <li class="list-group-item">To: {{ to }}</li>
        </ul>
      </div>

      {% if error == 0 %}

      <div class="col-sm-6">
        <ul class="list-group">
          <h2>Our Estimation</h2>
          {% if journeyTime.h %}
          <li class="list-group-item">Journey time: {{ journeyTime.h }} hours, {{ journeyTime.m }} minutes, {{ journeyTime.s }} seconds</li>
          {% elif journeyTime.m %}
          <li class="list-group-item">Journey time: {{ journeyTime.m }} minutes, {{ journeyTime.s }} seconds</li>
          {% else %} <!-- have hours, minute & seconds -->
          <li class="list-group-item">Journey time: {{ journeyTime.s }} seconds</li>
          {% endif %}

          <li class="list-group-item">Journey cost: â‚¬ {{ cost }}</li>
          <li class="list-group-item">Best time to catch bus: {{ bestStartTime }}</li>
        </ul>
      </div>

      {% else %}
      <!-- there's an error, display error messages -->
      <div class="col-sm-6">
        <ul class="list-group">
          <h2>Our Estimation</h2>
          <li class="list-group-item">{{ journeyTime}}</li>

          <li class="list-group-item">{{ cost }}</li>
          <li class="list-group-item">{{ bestStartTime }}</li>
        </ul>
      </div>

      {% endif %}

    </div>
  </div>

  {% endif %}

</div>
{% endblock %}